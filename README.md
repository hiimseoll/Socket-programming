# Socket-programming
HLU Computer network final project

***

# Computer Network Project

## 프로젝트 개요

본 프로젝트는 컴퓨터네트워크 강의를 위한 최종 프로젝트로 제작된 소프트웨어입니다.  
유닉스 소켓(AF_UNIX)과 인터넷 소켓(AF_INET)를 활용한 채팅 시스템을 구현하였으며, 멀티룸 채팅 기능 및 멀티프로세스 처리, 공유 메모리 IPC를 포함합니다.  
사용자는 유닉스 도메인 소켓 클라이언트를 통해 서버에 접속하여 여러 채팅방 중 하나를 선택해 대화할 수 있습니다.

***

## 주요 구성

- `server.c`  
  멀티룸 기능과 공유 메모리(Shared Memory)를 이용해 여러 클라이언트가 동시에 채팅할 수 있도록 설계된 TCP 서버 프로그램이며, 클라이언트 연결을 받고 메시지 전달을 담당합니다.

- `c-term.c`  
  AF_UNIX 소켓 클라이언트 프로그램으로, 사용자가 키보드 입력을 서버에 전송하여 채팅에 참여할 수 있습니다. 컴파일 시 `-DC1` ~ `-DC4` 옵션을 통해 서로 다른 채널에 접속할 수 있습니다.

- `c-disp.c`  
  AF_UNIX 소켓 서버와 TCP 클라이언트 역할을 병행하는 중계 역할을 하는 프로그램입니다. 유닉스 소켓으로부터 받은 메시지를 TCP 소켓을 통해 전송합니다.

- `CMakeLists.txt`  
  프로젝트 컴파일용 CMake 빌드 설정 파일로, 여러 클라이언트 및 중계 실행파일을 자동으로 생성할 수 있도록 구성되어 있습니다.

***

## 빌드 및 실행 방법

1. CMake를 사용하여 빌드 디렉토리 생성 및 컴파일

```bash
mkdir build
cd build
cmake ..
make
```

2. 서버 실행

```bash
./server.out
```

서버는 기본적으로 8081 포트에서 클라이언트의 접속을 대기합니다.

3. 각 클라이언트 실행 (예: 1~4번 클라이언트)

```bash
./c-term01
./c-term02
...
```

4. 중계 클라이언트 실행 (예: 1~4번 중계기)

```bash
./c-disp01 localhost 8081
./c-disp02 localhost 8081
...
```

***

## 기능 설명

- **멀티룸 채팅 지원**  
  최대 3개의 채팅방이 운영되며, 각 채팅방당 최대 5명의 사용자가 입장 가능. 사용자는 채팅방 목록을 확인하고 원하는 방에 참여 가능.

- **메시지 브로드캐스트**  
  하나의 채팅방에 들어온 사용자가 보낸 메시지는 해당 방의 다른 사용자에게 전달됨.

- **유닉스 도메인 소켓과 TCP/IP 소켓 연동**  
  `c-disp` 프로그램이 유닉스 도메인 소켓에서 수신한 데이터를 TCP 소켓으로 중계하여 네트워크 통신과 로컬 통신을 결합.

- **공유 메모리와 멀티 프로세싱 활용**  
  서버는 공유 메모리를 통해 사용자 상태와 메시지를 관리하며, `fork()`를 사용해 각 클라이언트 접속에 대해 별도 프로세스 처리.

***

## 사용 기술 및 라이브러리

- C언어, POSIX API 기반 소켓 프로그래밍
- 유닉스 도메인 소켓(AF_UNIX) 및 인터넷 소켓(AF_INET)
- 공유 메모리(IPC) 및 시그널 처리
- 멀티프로세싱(`fork()`) 및 스레딩(pthread)
- CMake 빌드 시스템

***

## 주의사항 및 향후 개선점

- 현재 채팅 메시지 크기는 버퍼 크기(`BUFF_SIZE`)에 의해 제한됨
- 클라이언트-서버 간 비동기 통신에서 메시지 손실 방지를 위한 추가 조치 필요
- GUI 클라이언트 개발 및 사용자 인증 기능 추가 가능

***
